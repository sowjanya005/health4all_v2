
<link type="text/css" rel="stylesheet" href="<?php echo base_url();?>assets/css/dicom/style.css" />
<link type="text/css" rel="stylesheet" href="<?php echo base_url();?>assets/css/dicom/jquery.mobile-1.4.5.min.css" />
<!-- mobile web app -->
<meta name="mobile-web-app-capable" content="yes" />
<link rel="shortcut icon" sizes="16x16" href="<?php echo base_url();?>assets/images/dicom/icons/icons/dwv-16.png" />
<link rel="shortcut icon" sizes="60x60" href="<?php echo base_url();?>assets/images/dicom/icons/icons/dwv-60.png" />
<link rel="shortcut icon" sizes="128x128" href="<?php echo base_url();?>assets/images/dicom/icons/icons/dwv-128.png" />
<!-- apple specific -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link rel="apple-touch-icon" sizes="16x16" href="<?php echo base_url();?>assets/images/dicom/icons/icons/dwv-16.png" />
<link rel="apple-touch-icon" sizes="60x60" href="<?php echo base_url();?>assets/images/dicom/icons/icons/dwv-60.png" />
<link rel="apple-touch-icon" sizes="128x128" href="<?php echo base_url();?>assets/images/dicom/icons/icons/dwv-128.png" />
<!-- Third party -->
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/jquery/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/jquery-mobile/jquery.mobile-1.4.5.min.js"></script>
<!-- decoders -->
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/pdfjs/jpx.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/pdfjs/util.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/pdfjs/arithmetic_decoder.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/rii-mango/lossless-min.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/ext/notmasteryet/jpg.js"></script>
<!-- Local -->
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/app/application.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/app/toolboxController.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/app/viewController.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/dicom/dicomParser.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/dicom/dictionary.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/filter.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/browser.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/generic.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/help.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/html.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/layer.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/loader.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/style.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/tools.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/gui/undo.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/image/filter.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/image/geometry.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/image/image.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/image/luts.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/image/view.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/image/reader.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/io/file.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/io/url.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/math/bucketQueue.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/math/point.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/math/scissors.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/math/shapes.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/math/stats.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/draw.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/ellipse.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/filter.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/info.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/line.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/livewire.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/rectangle.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/roi.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/scroll.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/toolbox.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/undo.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/windowLevel.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/tools/zoomPan.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/utils/string.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/utils/uri.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/src/utils/thread.js"></script>

<!-- Launch the app -->
<script type="text/javascript" src="<?php echo base_url();?>assets/js/dicom/appgui.js"></script>
<script type="text/javascript">
/**
 * Application launcher.
 */

// check browser support
dwv.browser.check();

// launch when page is loaded
$(document).ready( function()
{
    // main application
    var myapp = new dwv.App();
    // initialise the application
    myapp.init({
        "containerDivId": "dwv",
        "fitToWindow": true,
        "gui": ["tool"],
        "tools": ["Scroll", "Zoom/Pan", "Window/Level"],
        "isMobile": true
    });
	<?php $dicoms=""; 
	foreach($images as $image){ $dicoms.= '"45.63.0.24/'.$image->filepath.'",'; }
	$dicoms = rtrim($dicoms,",");
	?>
	myapp.loadURLs([<?php echo $dicoms;?>]);
	
	
	
	
	var url = <?php echo '"45.63.0.24/'.$image->filepath.'"'; ?>;
	var request = new XMLHttpRequest();
	request.open('GET', url, true);
	request.responseType = "arraybuffer";
	request.onload = function (event) {
    // setup the dicom parser
    var dicomParser = new dwv.dicom.DicomParser();
    // parse the buffer
    dicomParser.parse(this.response);
    
    // div to display text
    var div = document.getElementById("tags");


    // break line
    div.appendChild(document.createElement("br"));
    
    // get the wrapped dicom tags
    var tags = dicomParser.getDicomElements();
    // display the modality
    div.appendChild(document.createTextNode(
        "Patient Name: " + tags.getFromName("PatientName")
    ));
    // break line
    div.appendChild(document.createElement("br"));
    
    // get the wrapped dicom tags
    var tags = dicomParser.getDicomElements();
    // display the modality
    div.appendChild(document.createTextNode(
        "Patient ID: " + tags.getFromName("PatientID")
    ));
    // break line
    div.appendChild(document.createElement("br"));
    
    // get the wrapped dicom tags
    var tags = dicomParser.getDicomElements();
    // display the modality
    div.appendChild(document.createTextNode(
        "Age " + tags.getFromName("PatientAge")
    ));
    // break line
    div.appendChild(document.createElement("br"));
    
    // get the wrapped dicom tags
    var tags = dicomParser.getDicomElements();
    // display the modality
    div.appendChild(document.createTextNode(
        "Modality (bis): " + tags.getFromName("Modality")
    ));
};
request.send(null);
});

</script>

<!-- Main page -->
<div data-role="page" data-theme="b" style="width:100%;">

<!-- Main content -->
<div data-role="content">

<!-- DWV -->
<div id="dwv" style="position:absolute;left:30%;">
<!-- Toolbar -->
<div class="toolbar"></div>
<!-- Layer Container -->
<div class="layerContainer">

<canvas class="imageLayer">Only for HTML5 compatible browsers...</canvas>
</div><!-- /layerContainer -->

</div><!-- /dwv -->
<div id="tags" style="position:absolute;"></div>

</div><!-- /content -->

</div><!-- /page -->

